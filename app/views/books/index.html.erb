<p style="color: green"><%= notice %></p>

<% content_for :title, "Livros" %>

<div class="container mt-4">
  <h1>Livros</h1>
  <p class="text-muted">Total de livros disponíveis: <strong><%= @books.count %></strong></p>

  <%= link_to "Cadastrar Livro", new_book_path, class: "btn btn-primary mb-3" %>

  <ul class="list-group">
    <% @books.each do |book| %>
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <%= link_to book.title, book_path(book) %>
          <br>
          <small class="text-muted">
            Autores: <%= book.authors.any? ? book.authors.map(&:name).join(", ") : "Nenhum autor cadastrado" %>
            <br>
            Gêneros: <%= book.genres.any? ? book.genres.map(&:name).join(", ") : "Nenhum gênero cadastrado" %>
          </small>
        </div>
        <div class="d-flex gap-2">
          <%= link_to "Editar", edit_book_path(book), class: "btn btn-sm btn-outline-secondary" %>
          <%= button_to "Excluir", book_path(book), method: :delete, data: { confirm: "Tem certeza que deseja excluir?" }, class: "btn btn-sm btn-outline-danger" %>
        </div>
      </li>
    <% end %>
  </ul>
</div>
<br>